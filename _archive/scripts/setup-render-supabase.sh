#!/bin/bash
# scripts/setup-render-supabase.sh - Configurar Render con Supabase

echo "ğŸš€ Configurando Render con Supabase"
echo "===================================="
echo ""

echo "ğŸ“‹ Variables de entorno para Render Dashboard:"
echo ""

echo "ğŸ”§ BACKEND SERVICE (editorial-app-backend):"
echo "-------------------------------------------"
echo "NODE_ENV=production"
echo "PORT=10000"
echo "DATABASE_URL=postgresql://postgres:VqX2KgTvTZLrOWlq@db.ybnpusbnqlizaiqvztph.supabase.co:5432/postgres"
echo "DB_HOST=db.ybnpusbnqlizaiqvztph.supabase.co"
echo "DB_PORT=5432"
echo "DB_NAME=postgres"
echo "DB_USER=postgres"
echo "DB_PASSWORD=VqX2KgTvTZLrOWlq"
echo "JWT_SECRET=\$%^Tdasd9529841#\$&*9dascaseASDeqQQasdcEasdc\$##@33"
echo "JWT_EXPIRES_IN=24h"
echo "BCRYPT_ROUNDS=12"
echo "UPLOAD_MAX_SIZE=10485760"
echo "ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf"
echo "UPLOAD_FOLDER=uploads"
echo "RATE_LIMIT_WINDOW_MS=900000"
echo "RATE_LIMIT_MAX_REQUESTS=100"
echo ""

echo "ğŸŒ FRONTEND SERVICE (editorial-app-frontend):"
echo "---------------------------------------------"
echo "NODE_ENV=production"
echo "VITE_API_URL=https://editorial-app-backend.onrender.com/api"
echo "VITE_API_TIMEOUT=10000"
echo ""

echo "ğŸ“ Archivos de configuraciÃ³n actualizados:"
echo "âœ… .env.supabase - Variables para desarrollo/testing"
echo "âœ… render-supabase.yaml - ConfiguraciÃ³n completa de Render"
echo ""

echo "ğŸ¯ Pasos para deployar en Render:"
echo ""
echo "1ï¸âƒ£ Ve a tu dashboard de Render:"
echo "   ğŸ‘‰ https://dashboard.render.com/"
echo ""
echo "2ï¸âƒ£ Conecta tu repositorio GitHub:"
echo "   ğŸ‘‰ New â†’ Web Service"
echo "   ğŸ‘‰ Connect GitHub: markitos002/editorial-app"
echo ""
echo "3ï¸âƒ£ Configurar Backend Service:"
echo "   ğŸ“ Name: editorial-app-backend"
echo "   ğŸ“‚ Root Directory: backend"
echo "   ğŸ—ï¸  Build Command: npm install"
echo "   â–¶ï¸  Start Command: npm start"
echo "   ğŸŒ Environment: Node"
echo "   ğŸ’° Plan: Free"
echo ""
echo "4ï¸âƒ£ Agregar variables de entorno del backend (arriba) â¬†ï¸"
echo ""
echo "5ï¸âƒ£ Configurar Frontend Service:"
echo "   ğŸ“ Name: editorial-app-frontend"
echo "   ğŸ“‚ Root Directory: (vacÃ­o - raÃ­z del repo)"
echo "   ğŸ—ï¸  Build Command: npm install && npm run build"
echo "   ğŸ“ Publish Directory: dist"
echo "   ğŸŒ Environment: Static Site"
echo "   ğŸ’° Plan: Free"
echo ""
echo "6ï¸âƒ£ Agregar variables de entorno del frontend (arriba) â¬†ï¸"
echo ""

echo "âš¡ Deploy automÃ¡tico:"
echo "   â€¢ Render detectarÃ¡ cambios en main"
echo "   â€¢ Deploy automÃ¡tico en cada push"
echo "   â€¢ URLs generadas automÃ¡ticamente"
echo ""

echo "ğŸ” VerificaciÃ³n post-deploy:"
echo "   1. Backend health check: https://editorial-app-backend.onrender.com/health"
echo "   2. Frontend: https://editorial-app-frontend.onrender.com"
echo "   3. Verificar logs en Render Dashboard"
echo ""

echo "ğŸ‰ Â¡Demo listo para el comitÃ©!"
